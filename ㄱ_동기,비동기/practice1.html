<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>promise 실습문제</title>
</head>
<body>
    <script>

        // function promise(){
        //     return new Promise(function(resolve,reject){
        //         setTimeout(function(){
        //             name = 'kim'
        //             txt ='back'
        //             message = 'callback hell'
        //             resolve() //성공일때 맨아래 then안에 함수들이 실행됨
        //         },3000)
        //     })
        // }

        // function a(){ //then 안에 넣으면 성공시 실행되는 함수
        //     console.log(`${name} 반가워`)
        // }

        // function b(){
        //     console.log(`${txt} 을 실행했구나`)
        // }

        // function c(){
        //     console.log(`여기는 ${message}`)
        // }

        // promise().then('resolve가 호출되면 실행')
        // .catch('reject가 호출되면 실행')


        // let name;
        // promise()
        // .then(a)
        // .then(b)
        // .then(c)

        function call(name){
           return new Promise(function(resolve, reject){
                setTimeout(function(){
                    console.log(name)
                    resolve(name)
                },1000)
            })
        }
        

        function back(txt){
            return new Promise(function(resolve,reject){
                setTimeout(function(){
                    console.log(txt)
                    resolve(txt)
                },1000)
            })
        }



        function hell(message){
            return new Promise(function(resolve,reject){
                setTimeout(function(){
                    console.log(message)
                    resolve(message)
                },1000)
            })
        }

        //promise then
        call('kim')
        .then(function(name){
            console.log(`${name} 반가워`)
            return back() //return하면 결과값이 객체로 반환
        })
        .then(function(txt){
            console.log(`${txt}을 실행했구나`)
            return hell()
        })
        .then(function(message){
            console.log(`여기는 ${message}`)
        })

        //promise는 then이 너무 많이 나옴
        //async/await
        async function exec(){
            const name = await call('김다빈');
            const txt = await back('광주')
            const msg = await hell('마포');
            console.log(`안녕 내이름은 ${name}, 난 ${txt}에서 왔어`)
            console.log(`지금 사는곳은 ${msg}야`)
        }

        exec();

        
        // call('kim').then(function(name){ //then 안에 성공했을때 함수 들어감
        //     console.log(`${name} 반가워`)
        //     //return 키워드를 사용하면 결과값이 promise 객체로 반환
        //     return back();
        // }).then(function(str){
        //     console.log(`${str}을 실행했구나`)
        // }).then(function(msg){
        //     console.log(msg)
        // })


        //then이 너무 많이나와서 쓰는 async/await
        async function exec() {
            const name = await call('kim')
            console.log(`${name} 반가워`)
            const text = await back('back')
            console.log(`${text}을 실행했구나`)
            const msg = await hell('callback hell');
            console.log(`여기는 ${msg}`)
        }
        exec();


    </script>
</body>
</html>