<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>promise</title>
</head>

<body>
    <script>

        //promise함수
        //resolve에 먼저 결과값 넣고 then에서 꺼내기
        const promise = new Promise((resolve, reject) => {
            setTimeout(() => {
                resolve('1초 후에 실행되었습니다.'); //resolve 안에 결과값 넣고 then으로 출력해도 됨
            }, 1000);
        });

        promise
        .then(function(result){
            console.log(result)
        })







        function add(n1, n2, cb) {
            return setTimeout(function () {
                let result = n1 + n2;
                cb(result)
            }, 1000)
        }

        //위 코드 promise로 변환
        function addPro(n1, n2) {
            return new Promise(function (resolve, reject) {
                setTimeout(function () {
                    let result = n1 + n2
                    resolve(result);
                }, 1000)
            })
        }

        addPro(2,4)
        .then(function(result){
            console.log(`2와 4를 더한 값${result}`)
        })

//////////////////////////////////////////////////////////////////////

        // function add(n1, n2, cb) {
        //     setTimeout(function () {
        //         let result = n1 + n2;
        //         cb(result)
        //     }, 1000)
        // }
        // function mul(n, cb) {
        //     setTimeout(function () {
        //         let result = n * 2;
        //         cb(result)
        //     }, 700)
        // }
        // function sub(n, cb) {
        //     setTimeout(function () {
        //         let result = n - 1;
        //         cb(result)
        //     }, 500)
        // }


        // //콜백함수
        // add(4, 3, function (x) {
        //     console.log('1', x)
        //     mul(x, function (y) {
        //         console.log('2', y)
        //         sub(y, function (z) {
        //             console.log('3', z)
        //         })
        //     })
        // })


        function addPro2(n1,n2){
            return new Promise(function(resolve,reject){
                setTimeout(function(){
                    let result = n1+n2;
                    resolve(result);
                },3000)
            })
        }


        function mul(n){
            return new Promise(function(resolve, reject){
                setTimeout(function(){
                    let result = n*2;
                    resolve(result);
                },4000)
            })
        }

        function sub(n){
            return new Promise(function(resolve,reject){
                setTimeout(function(){
                    let result = n -1;
                    resolve(result);
                },5000)
            })
        }


        addPro2(2,10)
        .then(function(result){
            console.log('1 : '+ result)
            return mul(result) //return하면 결과값이 객체로 반환
        })
        .then(function(result){
            console.log('2:'+ result)
        })




    </script>
</body>

</html>